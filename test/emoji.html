<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
<script src="assets/nav.js"></script>

<div>
	<textarea name="" id="txt" cols="30" rows="10"></textarea>
</div>
<a href="#" id="e">插入表情</a>
<script type="module">
	import {bindEmojiTrigger} from "../src/Widget/Emoji.js";
	let txt = document.getElementById('txt');

	function insertAtCursor(textarea, str){
		if(textarea.selectionStart || textarea.selectionStart === 0){
			let startPos = textarea.selectionStart;
			let endPos = textarea.selectionEnd;
			textarea.value = textarea.value.substring(0, startPos)
				+ str
				+ textarea.value.substring(endPos, textarea.value.length);
		}else{
			textarea.value += str;
		}
	}

	bindEmojiTrigger(document.getElementById('e'), {onSelect: code=>{
		console.log(code);
			insertAtCursor(txt, code);
			txt.focus();
		}})
</script>
</body>
</html>